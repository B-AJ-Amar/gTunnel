"use strict";(self.webpackChunkgtunnel_docs=self.webpackChunkgtunnel_docs||[]).push([[3332],{8453:(n,e,i)=>{i.d(e,{R:()=>r,x:()=>l});var a=i(6540);const t={},o=a.createContext(t);function r(n){const e=a.useContext(o);return a.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function l(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(t):n.components||t:r(n.components),a.createElement(o.Provider,{value:e},n.children)}},9984:(n,e,i)=>{i.r(e),i.d(e,{assets:()=>s,contentTitle:()=>l,default:()=>u,frontMatter:()=>r,metadata:()=>a,toc:()=>c});const a=JSON.parse('{"id":"server-config","title":"Server Configuration","description":"Comprehensive guide to configuring the gTunnel server component.","source":"@site/docs/server-config.md","sourceDirName":".","slug":"/server-config","permalink":"/gTunnel/docs/server-config","draft":false,"unlisted":false,"editUrl":"https://github.com/B-AJ-Amar/gTunnel/tree/main/docs/docs/server-config.md","tags":[],"version":"current","sidebarPosition":5,"frontMatter":{"sidebar_position":5},"sidebar":"tutorialSidebar","previous":{"title":"Client Configuration","permalink":"/gTunnel/docs/client-config"},"next":{"title":"Deployment Guide","permalink":"/gTunnel/docs/deployment"}}');var t=i(4848),o=i(8453);const r={sidebar_position:5},l="Server Configuration",s={},c=[{value:"Configuration Overview",id:"configuration-overview",level:2},{value:"Basic Configuration",id:"basic-configuration",level:2},{value:"Server Settings",id:"server-settings",level:2},{value:"Network Configuration",id:"network-configuration",level:3},{value:"TLS Configuration",id:"tls-configuration",level:3},{value:"Timeouts and Limits",id:"timeouts-and-limits",level:3},{value:"Authentication Configuration",id:"authentication-configuration",level:2},{value:"No Authentication",id:"no-authentication",level:3},{value:"Token Authentication",id:"token-authentication",level:3},{value:"JWT Authentication",id:"jwt-authentication",level:3},{value:"Connection Limits",id:"connection-limits",level:2},{value:"Basic Limits",id:"basic-limits",level:3},{value:"Advanced Limits",id:"advanced-limits",level:3},{value:"Subdomain Configuration",id:"subdomain-configuration",level:2},{value:"Basic Subdomain Settings",id:"basic-subdomain-settings",level:3},{value:"Advanced Subdomain Control",id:"advanced-subdomain-control",level:3},{value:"Custom Domain Support",id:"custom-domain-support",level:2},{value:"Basic Custom Domains",id:"basic-custom-domains",level:3},{value:"Advanced Custom Domain Control",id:"advanced-custom-domain-control",level:3},{value:"Logging Configuration",id:"logging-configuration",level:2},{value:"Basic Logging",id:"basic-logging",level:3},{value:"Advanced Logging",id:"advanced-logging",level:3},{value:"Monitoring Configuration",id:"monitoring-configuration",level:2},{value:"Database Configuration",id:"database-configuration",level:2},{value:"SQLite (Default)",id:"sqlite-default",level:3},{value:"PostgreSQL",id:"postgresql",level:3},{value:"MySQL",id:"mysql",level:3},{value:"Complete Example",id:"complete-example",level:2},{value:"Environment Variables",id:"environment-variables",level:2},{value:"Server Variables",id:"server-variables",level:3},{value:"Authentication Variables",id:"authentication-variables",level:3},{value:"Database Variables",id:"database-variables",level:3},{value:"Configuration Validation",id:"configuration-validation",level:2},{value:"Common Validation Errors",id:"common-validation-errors",level:3},{value:"Management Commands",id:"management-commands",level:2},{value:"Initialize Configuration",id:"initialize-configuration",level:3},{value:"Show Configuration",id:"show-configuration",level:3},{value:"Validate Configuration",id:"validate-configuration",level:3},{value:"Test Configuration",id:"test-configuration",level:3}];function d(n){const e={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...n.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(e.header,{children:(0,t.jsx)(e.h1,{id:"server-configuration",children:"Server Configuration"})}),"\n",(0,t.jsx)(e.p,{children:"Comprehensive guide to configuring the gTunnel server component."}),"\n",(0,t.jsx)(e.h2,{id:"configuration-overview",children:"Configuration Overview"}),"\n",(0,t.jsx)(e.p,{children:"The gTunnel server configuration defines how the server operates, handles client connections, and manages tunnels. Configuration is done through YAML files."}),"\n",(0,t.jsx)(e.h2,{id:"basic-configuration",children:"Basic Configuration"}),"\n",(0,t.jsx)(e.p,{children:"Minimal server configuration:"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-yaml",children:'server:\n  port: 8080\n  domain: "tunnel.example.com"\n  \nauth:\n  required: false\n'})}),"\n",(0,t.jsx)(e.h2,{id:"server-settings",children:"Server Settings"}),"\n",(0,t.jsx)(e.p,{children:"Configure the core server behavior."}),"\n",(0,t.jsx)(e.h3,{id:"network-configuration",children:"Network Configuration"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-yaml",children:'server:\n  port: 8080                         # Server listening port\n  bind_address: "0.0.0.0"           # Bind address (0.0.0.0 for all interfaces)\n  domain: "tunnel.example.com"       # Server domain\n  public_url: "https://tunnel.example.com"  # Public URL (optional)\n'})}),"\n",(0,t.jsx)(e.h3,{id:"tls-configuration",children:"TLS Configuration"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-yaml",children:'server:\n  tls:\n    enabled: true                    # Enable TLS\n    cert_file: "/etc/ssl/certs/server.crt"\n    key_file: "/etc/ssl/private/server.key"\n    auto_cert: false                 # Use Let\'s Encrypt auto-certificates\n    cache_dir: "/var/cache/gtunnel"  # Certificate cache directory\n'})}),"\n",(0,t.jsx)(e.h3,{id:"timeouts-and-limits",children:"Timeouts and Limits"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-yaml",children:"server:\n  read_timeout: 30s                 # Read timeout\n  write_timeout: 30s                # Write timeout\n  idle_timeout: 120s                # Idle connection timeout\n  max_header_bytes: 1048576         # Max header size (1MB)\n"})}),"\n",(0,t.jsx)(e.h2,{id:"authentication-configuration",children:"Authentication Configuration"}),"\n",(0,t.jsx)(e.p,{children:"Control who can create tunnels."}),"\n",(0,t.jsx)(e.h3,{id:"no-authentication",children:"No Authentication"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-yaml",children:"auth:\n  required: false\n"})}),"\n",(0,t.jsx)(e.h3,{id:"token-authentication",children:"Token Authentication"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-yaml",children:'auth:\n  required: true\n  provider: "token"\n  tokens:\n    - "super-secret-token-1"\n    - "another-secret-token"\n    - "client-specific-token"\n'})}),"\n",(0,t.jsx)(e.h3,{id:"jwt-authentication",children:"JWT Authentication"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-yaml",children:'auth:\n  required: true\n  provider: "jwt"\n  jwt:\n    secret: "your-jwt-secret-key"\n    issuer: "gtunnel"\n    audience: "clients"\n    expiration: "24h"\n    algorithm: "HS256"\n'})}),"\n",(0,t.jsx)(e.h2,{id:"connection-limits",children:"Connection Limits"}),"\n",(0,t.jsx)(e.p,{children:"Control resource usage and prevent abuse."}),"\n",(0,t.jsx)(e.h3,{id:"basic-limits",children:"Basic Limits"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-yaml",children:'limits:\n  max_connections: 1000             # Maximum concurrent connections\n  max_tunnels_per_client: 10        # Tunnels per client\n  connection_timeout: "5m"          # New connection timeout\n'})}),"\n",(0,t.jsx)(e.h3,{id:"advanced-limits",children:"Advanced Limits"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-yaml",children:'limits:\n  max_connections: 1000\n  max_tunnels_per_client: 10\n  max_bandwidth_per_client: "100MB/s"\n  max_request_size: "10MB"\n  connection_timeout: "5m"\n  idle_timeout: "30m"\n  \n  # Rate limiting\n  rate_limit:\n    enabled: true\n    requests_per_minute: 100\n    burst: 20\n    block_duration: "5m"\n    whitelist_ips:\n      - "192.168.1.0/24"\n      - "10.0.0.0/8"\n'})}),"\n",(0,t.jsx)(e.h2,{id:"subdomain-configuration",children:"Subdomain Configuration"}),"\n",(0,t.jsx)(e.p,{children:"Control subdomain assignment and validation."}),"\n",(0,t.jsx)(e.h3,{id:"basic-subdomain-settings",children:"Basic Subdomain Settings"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-yaml",children:'subdomains:\n  enabled: true                     # Enable subdomain support\n  wildcard_domain: "*.tunnel.example.com"  # Wildcard domain\n'})}),"\n",(0,t.jsx)(e.h3,{id:"advanced-subdomain-control",children:"Advanced Subdomain Control"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-yaml",children:'subdomains:\n  enabled: true\n  wildcard_domain: "*.tunnel.example.com"\n  \n  # Reserved subdomains (not available to clients)\n  reserved:\n    - "www"\n    - "api"\n    - "admin"\n    - "mail"\n    - "ftp"\n    - "blog"\n    - "app"\n    \n  # Allowed subdomain patterns\n  allowed_patterns:\n    - "^[a-z0-9-]{3,20}$"          # 3-20 chars, alphanumeric + hyphens\n    - "^test-[a-z0-9]+$"           # Test prefix pattern\n    \n  # Blocked patterns\n  blocked_patterns:\n    - ".*admin.*"\n    - ".*root.*"\n    - ".*system.*"\n'})}),"\n",(0,t.jsx)(e.h2,{id:"custom-domain-support",children:"Custom Domain Support"}),"\n",(0,t.jsx)(e.p,{children:"Allow clients to use their own domains."}),"\n",(0,t.jsx)(e.h3,{id:"basic-custom-domains",children:"Basic Custom Domains"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-yaml",children:"custom_domains:\n  enabled: true                     # Enable custom domain support\n  verification_required: false     # Require domain verification\n"})}),"\n",(0,t.jsx)(e.h3,{id:"advanced-custom-domain-control",children:"Advanced Custom Domain Control"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-yaml",children:'custom_domains:\n  enabled: true\n  verification_required: true      # Require DNS verification\n  dns_verification: true\n  verification_record: "_gtunnel-verification"\n  verification_timeout: "5m"\n  \n  # Allowed domain patterns\n  allowed_domains:\n    - "*.mycompany.com"\n    - "*.example.org"\n    - "app.example.net"\n    \n  # Blocked domains\n  blocked_domains:\n    - "*.google.com"\n    - "*.facebook.com"\n    - "localhost"\n'})}),"\n",(0,t.jsx)(e.h2,{id:"logging-configuration",children:"Logging Configuration"}),"\n",(0,t.jsx)(e.p,{children:"Configure logging and monitoring."}),"\n",(0,t.jsx)(e.h3,{id:"basic-logging",children:"Basic Logging"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-yaml",children:'logging:\n  level: "info"                     # debug, info, warn, error\n  format: "json"                    # text or json\n'})}),"\n",(0,t.jsx)(e.h3,{id:"advanced-logging",children:"Advanced Logging"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-yaml",children:'logging:\n  level: "info"\n  format: "json"\n  \n  # Log files\n  file: "/var/log/gtunnel-server.log"\n  access_log: "/var/log/gtunnel-access.log"\n  audit_log: "/var/log/gtunnel-audit.log"\n  \n  # Log rotation\n  rotate:\n    enabled: true\n    max_size: "100MB"\n    max_files: 30\n    max_age: "90d"\n    compress: true\n'})}),"\n",(0,t.jsx)(e.h2,{id:"monitoring-configuration",children:"Monitoring Configuration"}),"\n",(0,t.jsx)(e.p,{children:"Enable metrics and health checks."}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-yaml",children:'monitoring:\n  enabled: true\n  metrics_port: 9090               # Prometheus metrics port\n  metrics_path: "/metrics"         # Metrics endpoint path\n  health_check_path: "/health"     # Health check endpoint\n  \n  # Health check configuration\n  health_check:\n    interval: "30s"\n    timeout: "5s"\n    \n  # Prometheus configuration\n  prometheus:\n    enabled: true\n    namespace: "gtunnel"\n    labels:\n      environment: "production"\n      region: "us-east-1"\n'})}),"\n",(0,t.jsx)(e.h2,{id:"database-configuration",children:"Database Configuration"}),"\n",(0,t.jsx)(e.p,{children:"Configure persistent storage (optional)."}),"\n",(0,t.jsx)(e.h3,{id:"sqlite-default",children:"SQLite (Default)"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-yaml",children:'database:\n  type: "sqlite"\n  connection: "/var/lib/gtunnel/gtunnel.db"\n'})}),"\n",(0,t.jsx)(e.h3,{id:"postgresql",children:"PostgreSQL"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-yaml",children:'database:\n  type: "postgres"\n  connection: "postgres://user:password@localhost/gtunnel"\n  max_connections: 10\n  ssl_mode: "require"\n'})}),"\n",(0,t.jsx)(e.h3,{id:"mysql",children:"MySQL"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-yaml",children:'database:\n  type: "mysql"\n  connection: "user:password@tcp(localhost:3306)/gtunnel"\n  max_connections: 10\n'})}),"\n",(0,t.jsx)(e.h2,{id:"complete-example",children:"Complete Example"}),"\n",(0,t.jsx)(e.p,{children:"Production-ready server configuration:"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-yaml",children:'server:\n  port: 443\n  bind_address: "0.0.0.0"\n  domain: "tunnel.mycompany.com"\n  \n  tls:\n    enabled: true\n    auto_cert: true\n    cache_dir: "/var/cache/gtunnel/certs"\n    \n  read_timeout: 30s\n  write_timeout: 30s\n  idle_timeout: 300s\n\nauth:\n  required: true\n  provider: "jwt"\n  jwt:\n    secret: "${JWT_SECRET}"\n    issuer: "gtunnel-prod"\n    audience: "clients"\n    expiration: "24h"\n\nlimits:\n  max_connections: 5000\n  max_tunnels_per_client: 20\n  max_bandwidth_per_client: "500MB/s"\n  connection_timeout: "10m"\n  idle_timeout: "60m"\n  \n  rate_limit:\n    enabled: true\n    requests_per_minute: 1000\n    burst: 100\n    block_duration: "10m"\n\nsubdomains:\n  enabled: true\n  wildcard_domain: "*.tunnel.mycompany.com"\n  reserved:\n    - "www"\n    - "api"\n    - "admin"\n    - "status"\n  allowed_patterns:\n    - "^[a-z0-9-]{3,30}$"\n  blocked_patterns:\n    - ".*admin.*"\n    - ".*root.*"\n\ncustom_domains:\n  enabled: true\n  verification_required: true\n  dns_verification: true\n  allowed_domains:\n    - "*.mycompany.com"\n    - "*.mydomain.org"\n\nlogging:\n  level: "info"\n  format: "json"\n  file: "/var/log/gtunnel-server.log"\n  access_log: "/var/log/gtunnel-access.log"\n  audit_log: "/var/log/gtunnel-audit.log"\n  rotate:\n    enabled: true\n    max_size: "100MB"\n    max_files: 60\n    max_age: "90d"\n\nmonitoring:\n  enabled: true\n  metrics_port: 9090\n  health_check_path: "/health"\n  prometheus:\n    enabled: true\n    namespace: "gtunnel"\n    labels:\n      environment: "production"\n\ndatabase:\n  type: "postgres"\n  connection: "${DATABASE_URL}"\n  max_connections: 50\n  ssl_mode: "require"\n'})}),"\n",(0,t.jsx)(e.h2,{id:"environment-variables",children:"Environment Variables"}),"\n",(0,t.jsx)(e.p,{children:"Override configuration with environment variables:"}),"\n",(0,t.jsx)(e.h3,{id:"server-variables",children:"Server Variables"}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.code,{children:"GTUNNEL_PORT"}),": Server port"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.code,{children:"GTUNNEL_DOMAIN"}),": Server domain"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.code,{children:"GTUNNEL_TLS_CERT"}),": TLS certificate file"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.code,{children:"GTUNNEL_TLS_KEY"}),": TLS private key file"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.code,{children:"GTUNNEL_CONFIG_PATH"}),": Configuration file path"]}),"\n"]}),"\n",(0,t.jsx)(e.h3,{id:"authentication-variables",children:"Authentication Variables"}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.code,{children:"GTUNNEL_AUTH_REQUIRED"}),": Require authentication (true/false)"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.code,{children:"GTUNNEL_JWT_SECRET"}),": JWT secret key"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.code,{children:"GTUNNEL_AUTH_TOKENS"}),": Comma-separated auth tokens"]}),"\n"]}),"\n",(0,t.jsx)(e.h3,{id:"database-variables",children:"Database Variables"}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.code,{children:"DATABASE_URL"}),": Database connection string"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.code,{children:"DATABASE_TYPE"}),": Database type (sqlite, postgres, mysql)"]}),"\n"]}),"\n",(0,t.jsx)(e.h2,{id:"configuration-validation",children:"Configuration Validation"}),"\n",(0,t.jsx)(e.p,{children:"The server validates configuration on startup:"}),"\n",(0,t.jsx)(e.h3,{id:"common-validation-errors",children:"Common Validation Errors"}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.strong,{children:"Invalid Port:"})}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{children:"Error: port must be between 1 and 65535\n"})}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.strong,{children:"Missing TLS Files:"})}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{children:"Error: TLS certificate file not found\n"})}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.strong,{children:"Invalid Domain:"})}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{children:"Error: domain must be a valid hostname\n"})}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.strong,{children:"JWT Configuration:"})}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{children:"Error: JWT secret is required when using JWT authentication\n"})}),"\n",(0,t.jsx)(e.h2,{id:"management-commands",children:"Management Commands"}),"\n",(0,t.jsx)(e.h3,{id:"initialize-configuration",children:"Initialize Configuration"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-bash",children:"gtunnel-server config init\n"})}),"\n",(0,t.jsx)(e.h3,{id:"show-configuration",children:"Show Configuration"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-bash",children:"gtunnel-server config show\n"})}),"\n",(0,t.jsx)(e.h3,{id:"validate-configuration",children:"Validate Configuration"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-bash",children:"gtunnel-server config validate\n"})}),"\n",(0,t.jsx)(e.h3,{id:"test-configuration",children:"Test Configuration"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-bash",children:"gtunnel-server config test --dry-run\n"})}),"\n",(0,t.jsx)(e.p,{children:"For more information, see:"})]})}function u(n={}){const{wrapper:e}={...(0,o.R)(),...n.components};return e?(0,t.jsx)(e,{...n,children:(0,t.jsx)(d,{...n})}):d(n)}}}]);